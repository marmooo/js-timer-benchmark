<!doctype html>
<html lang="en">
  <head prefix="og: http://ogp.me/ns#">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Benchmark the accuracy of various timers available in JavaScript.">
    <title>js-timer-benchmark</title>
    <meta property="og:title" content="js-timer-benchmark">
    <meta property="og:site_name" content="js-timer-benchmark">
    <meta property="og:description" content="Benchmark the accuracy of various timers available in JavaScript.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://marmooo.github.io/js-timer-benchmark/">
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-F2179JXDYY"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-F2179JXDYY');
    </script>
    <link class="drop-inline-css" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
    <style>
    #result th:nth-child(2),
    #result td:nth-child(2),
    #result th:nth-child(3),
    #result td:nth-child(3) {
      text-align: right;
    }
    </style>
    <script data-ad-client="ca-pub-6459713332128733" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  </head>
  <body>
    <header>
      <nav class="navbar navbar-expand">
        <div class="container flex-wrap">
          <a class="navbar-brand" href="/js-timer-benchmerk/">
            js-timer-benchmark
          </a>
            <button title="toggle dark-mode" id="toggleDarkMode" class="fs-4 btn p-0 ms-1" type="button">ðŸŒ“</button>
          </div>
        </div>
      </nav>
    </header>
    <main class="container">
      <noscript>
        <div class="alert alert-warning">Please turn on Javascript.</div>
      </noscript>
      <p>
      Benchmark the accuracy of various timers available in JavaScript.
      Press the START button to run the benchmark.
      The benchmark will measure n seconds and measure its accuracy.
      When benchmarking, keep in mind that JavaScript execution speed differs between foreground and background.
      If you want to check the accurary in the background, activate another tab within 1 second after pressing the test button.
      </p>
      <div class="text-center">
        <button id="startButton" class="btn btn-lg btn-primary" type="button">START</button>
      </div>
      <div class="row">
        <div class="col-lg pt-3">
          <div class="card">
            <h4 class="card-header">Result:</h4>
            <div class="card-body table-responsive">
              <table id="result" class="table table-striped">
                <tbody>
                  <tr><th>method</th><th>1sec error</th><th>2sec error</th></tr>
                  <tr><td>setTimeout</td><td></td><td></td></tr>
                  <tr><td>setInterval (10)</td><td></td><td></td></tr>
                  <tr><td>setInterval (100)</td><td></td><td></td></tr>
                  <tr><td>AudioBufferSourceNode</td><td></td><td></td></tr>
                  <tr><td>OscillatorNode</td><td></td><td></td></tr>
                  <tr><td>ConstantSourceNode</td><td></td><td></td></tr>
                  <tr><td>requestAnimationFrame</td><td></td><td></td></tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
        <div class="col-lg pt-3">
          <div class="card">
            <h4 class="card-header">Conclusion</h4>
            <div class="card-body">
              <h5>setTimeout &amp; setInterval</h5>
              <p>Suitable for general use. Less accurate in inactive tabs (ref: <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/setTimeout">MDN</a>).</p>
              <h5>requestAnimationFrame</h5>
              <p>Should run in active tabs.</p>
              <h5>AudioBufferSourceNode</h5>
              <p>It has lower accurary at initial startup than OscillatorNode and ConstantSourceNode.
              However, from the second time onwards, the accuracy is higher than theirs.  
              </p>
              <h5>OscillatorNode &amp; ConstantSourceNode</h5>
              <p>Suitable for audio playback or when you need a high-precision timer in inactive tabs.
              It is less accurate than setTimeout and setInterval in active tabs.
              </p>
            </div>
          </div>
        </div>
        <div class="alert alert-info mt-3">
          <h4>Tips for Safari</h4>
          <ul>
            <li>AudioScheduledSourceNode needs a path to the destionation</li>
            <li>AudioBufferSourceNode requires AudioBuffer</li>
          </ul>
        </div>
      </div>
    </main>
    <footer class="pt-4 alert text-center">
      <div>
        <a class="px-1" href="/">Home</a>
        <a class="px-1" href="/terms/">Terms</a>
        <a class="px-1" href="https://github.com/marmooo/js-timer-benchmark">Contact</a>
      </div>
      <div class="text-muted">&copy; <a href="https://github.com/marmooo">marmooo</a></div>
    </footer>
    <script type="module" src="/js-timer-benchmark/index.js"></script>
  </body>
</html>
